:rootDir: ../
:partialsDir: {rootDir}partials/
include::{rootDir}_attributes.adoc[]
= Usage with module loaders
:description: How to use TinyMCE in a project using a module bundler like Webpack or Browserify
:description_short: How to include TinyMCE in a project using CommonJS modules.
:keywords: webpack browserify commonjs modules tinymce
:title_nav: Usage with module loaders

{productname} can easily be installed with `npm` and used with module loaders such as https://webpack.github.io/[Webpack] and http://browserify.org/[Browserify].

First decide how to load your modules.

[[es2015-modules]]
=== ES2015 modules

If you are using ES2015 modules, a simple example could look something like this.

[source,js,subs="+attributes"]
----
// Import {productname}
import tinymce from 'tinymce/tinymce';

// Default icons are required for {productname} 5.3 or above
import 'tinymce/icons/default';

// A theme is also required
import 'tinymce/themes/silver';

// Any plugins you want to use has to be imported
import 'tinymce/plugins/paste';
import 'tinymce/plugins/link';

// Initialize the app
tinymce.init({
  selector: '#tiny',
  plugins: ['paste', 'link']
});
----

[[commonjs-modules]]
=== CommonJS modules

The example is nearly the same if you are using CommonJS modules. However, a different `require` function is used to import the dependencies.

[source,js,subs="+attributes"]
----
// Import {productname}
var tinymce = require('tinymce/tinymce');

// Default icons are required for {productname} 5.3 or above
require('tinymce/icons/default');

// A theme is also required
require('tinymce/themes/silver');

// Any plugins you want to use has to be imported
require('tinymce/plugins/paste');
require('tinymce/plugins/link');

// Initialize the app
tinymce.init({
  selector: '#tiny',
  plugins: ['paste', 'link']
});
----

[[getting-the-skin]]
== Getting the skin

A *skin* consists of some fonts and CSS files used by the editor and {productname} will not work without them. By default {productname} looks for these files in a `/skins` directory located in your root directory. This can  be link:{rootDir}configure/editor-appearance.html#skin_url[configured in the init object].

The quickest way to get started is to copy the skin that comes packaged with {productname}. This skin is located in `node_modules/tinymce/skins` - either manually copy the files in finder/file explorer or use the terminal:

*MacOS and Linux*

[source]
----
cp -r node_modules/tinymce/skins skins
----

*Windows*

[source]
----
xcopy /I /E node_modules/tinymce/skins skins
----

[[webpack-file-loader]]
=== Webpack file-loader

Another option when using Webpack is to use the https://github.com/webpack/file-loader[file loader] together with the https://github.com/webpack/docs/wiki/context[require.context] function to copy the skins directory by adding these lines before the call to the {productname} `init` function:

[source,js]
----
require.context(
  'file-loader?name=[path][name].[ext]&context=node_modules/tinymce!tinymce/skins',
  true,
  /.*/
);
----

This copies the skins directory from `node_modules/tinymce` to your output directory as defined in your Webpack configuration. This is useful as you can easily move the output directory of your build without having to copy over the skins folder manually - webpack will take care of it for you.

[[minification-with-uglifyjs2]]
=== Minification with UglifyJS2

Another popular JS minification tool, https://github.com/mishoo/UglifyJS2[UglifyJS2], will corrupt {productname} unless `ascii-only` is set.

This can happen when it is used directly or through module bundler. In https://webpack.github.io/[Webpack], `-p` CLI option cannot be used to bundle {productname}, and instead, you'll need to configure minification explicitly:

[source,js]
----
plugins: [
  new webpack.optimize.UglifyJsPlugin({
      /*...*/
      output: {
        "ascii_only": true
      }
  })
]
----

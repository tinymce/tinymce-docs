= TinyMCE 6.3
:navtitle: TinyMCE 6.3
:description: Release notes for TinyMCE 6.3
:keywords: releasenotes, new, changes, bugfixes
:page-toclevels: 1

include::partial$misc/admon-releasenotes-for-stable.adoc[]

[[overview]]
== Overview

{productname} 6.3 was released for {enterpriseversion} and {cloudname} on Wednesday, December 7^th^, 2022. It includes {productname} 6.3, additional changes to Premium plugins, and several new Premium plugins. These release notes provide an overview of the changes for {productname} 6.3:

* xref:new-premium-plugins[New Premium plugins]
* xref:accompanying-premium-plugin-changes[Accompanying Premium Plugin changes]
* xref:accompanying-premium-skins-and-icon-packs-changes[Accompanying Premium Skins and Icon Packs changes]
* xref:improvements[Improvements]
* xref:additions[Additions]
* xref:changes[Changes]
* xref:bug-fixes[Bug fixes]
* xref:security-fixes[Security fixes]
* xref:deprecated[Deprecated]
* xref:known-issues[Known issues]

[[new-premium-plugins]]
== New Premium plugins

=== Inline CSS 1.0.0

The {productname} 6.3 release includes the new **Inline CSS** premium plugin.

The Inline CSS plugin allows the user to <notes here>.

For information on the **Inline CSS** plugin, see: xref:inline-css.adoc[Inline CSS].

=== Smart Typography 1.0.0

The {productname} 6.3 release includes the new **Smart typography** premium plugin.

The Smart Typography plugin, depending on its setting, can automatically or interactively replace common typewriter-style characters with their professional typesetter’s equivalents.

For information on the **Smart typography** plugin, see: xref:smart-typography.adoc[Smart typography].

[[accompanying-premium-plugin-changes]]
== Accompanying Premium Plugin changes

The following premium plugin updates were released alongside {productname} 6.3.

=== Accessibility Checker 3.1.0

The {productname} 6.3 release includes an accompanying release of the **Accessibility Checker** premium plugin.

**Accessibility Checker** 3.1.0 includes the following fixes, additions, and improvements.

==== Merge tags prefix and suffix elements were not ignored

Previously, **Accessibility Checker** incorrectly flagged xref:mergetags.adoc[Merge Tags] prefixes and suffixes as presenting a contrast issue.

With this update, the **Accessibility Checker** plugin ignores Merge Tag prefixes and suffixes, as expected.

==== Added a new rule to show a warning when the alternative text of an image exceeds 100 characters
// @bforte review required
In {productname} 6.3, a new function was introduced that added a new rule to show a warning to the user when the alternative text of an image either exceeds 100 characters or when alternative text is not present for an image.

Warning prompts will be displayed as below examples.

When the alternative text exceeds the rule (>100) message will display `Image alternative text should be less than 100 characters`
Secondary message will display if this rule is triggered reading `Alternative text is (number) characters`, which provides the user with a `num_value` in which the alternative text count currently is.

If alternative text cannot be found, the message will display `Images must have an alternative text description.  Decorative images are not allowed`

Worth noting, if the user attempts to replace the alternative text with the same content as the `file_name` and click `repair`, the dialog will now display an error with the message `Alternative text must not be the same as the image filename`.


**Accessibility Checker** 3.1.0 now includes a rule that, when applied, shows a warning dialog when an image’s alternative (`+alt+`) text attribute exceeds 100 characters. This dialog also presents the alternative text in an editable field, for immediate repair.

==== Replaces the single warning icon presented in dialogs with icons specific to each alert level;

Previously, all **Accessibility Checker** warning dialogs presented with a triangle warning icon, regardless of whether the alert was informational, a warning, or an error.

With this update, **Accessibility Checker** shows a level-specific icon with each alert.

==== improves the discoverability of the question mark button in warning dialogs
// @bforte review required
In {productname} 6.3 improvements were made to the `Help` icon in the accessibility checker dialog.

The changes made to the icon involved re-adjusting the icon’s text alignment to `centered`, decreasing the font size for the subheadings under the label of  `issue, warning and error`.  

Additional changes were made to remove borders from the exterior of the description field, while adjusting the contrast colors to ensure they matched the `background-color` for the icon changes that were added in {productname}’s 6.3 release also.

Many **Accessibility Checker** dialogs include a question mark icon. This icon is also a link to further information about the discovered issue.

This update includes changes to the presentation of this icon to make its being a clickable button more immediately apparent.

==== improves the legibility of warning dialogs

In concert with the changes noted above to the question mark icon in **Accessibility Checker** dialogs, legibility improvements were made to the presentation and typography of these dialogs.

==== Added correct icons in dialog alert panel for each severity level
// @bforte review required
In {productname} 6.3, improvements for accessibility checker were added to provide additional support for users when trying to identify different alerts such as `info | warning or error` icons.

In previous versions of {productname} the accessibility checker used the same triangle warning icon for all alerts when displayed.  With the improvements made in 6.3, each icon will now display as its own unique icon with a matching pair color style to provide a better UX for all users and developers.

Warning alert now displays as an `exclamation` mark nested inside a `yellow` colored `round circle`.
Error alert now displays as an `exclamation` mark nested inside a `red` colored  `triangle`.
Success alert now displays as a `green` tick.

Other benefits from the introduction of this improvement made in {productname}'s 6.3 release is that users requiring visual aids will be able to enjoy the benefits of a improved user experience if they choose to upgrade to {product name} 6.3.

For information on the **Accessibility Checker** plugin, see: xref:a11ychecker.adoc[Accessibility Checker].

=== Checklist 2.0.2

The {productname} 6.3 release includes an accompanying release of the **Checklist** premium plugin.

**Checklist** 2.0.2 includes one fix:

==== Checklist toggling did not preserve selection when used on an existing list.

// @bforte review required.
In previous versions of {productname}, when selecting content over either an ordered or unordered list, then switching the list to a checklist would not preserve the user's selection of the content.

In {productname} 6.3, the user selection is now preserved when toggling a list to a checklist.

For information on the **Checklist** plugin, see xref:checklist.adoc[Checklist].


=== Comments 3.2.0

The {productname} 6.3 release includes an accompanying release of the **Comments** premium plugin.

**Comments** 3.2.0 includes one fix and one change:

==== A comment could be inserted when in an empty editor or block

// @bforte review required
In previous versions of {productname} a bug was found that allowed comments to be placed into an empty editor or block.

With the update to {productname} 6.3, the comments button, menu-item, comment sidebar and shortcut keys for now disables this function when the editor contains no content.

==== Selection now expands to select the entirety of what a comment will be added to when clicking the toolbar or menu buttons

// write-up here
// @bforte This is already covered in // https://ephocks.atlassian.net/browse/TINY-8777 under TINY-9001 ??

For information on the **Comments** plugin, see: xref:introduction-to-tiny-comments.adoc[Introduction to Tiny Comments].


=== Merge tags 1.1.0

The {productname} 6.3 release includes an accompanying release of the **Merge tags** premium plugin.

**Merge Tags 1.1.0 includes one fix:

// @bforte review required
==== New mceMergeTag command to wrap selected content in a merge tag
==== The autocompleter was triggered without being preceded by a merge tag prefix.

In {productname} 6.2, the Merge Tags autocompleter would remain after being triggered, in the case where a merge tag was inserted by the 'mceMergeTag' command and not the autocompleter. 

With the update to {productname} 6.3, the autocompleter now closes after the 'mceMergeTag' command is executed.


For information on the **Merge tags** plugin, see: xref:mergetags.adoc[Merge Tags].


=== Spellchecker Pro <spellchecker pro version number>

The {productname} 6.3 release includes an accompanying release of the **Spellchecker Pro** premium plugin.

==== Spellchecking could search outside of editor for language match. // REVIEW TITLE

// https://ephocks.atlassian.net/browse/TINY-8989
For spelling, a word’s language was identified by finding the nearest `lang` attribute anywhere in the word’s ancestors (ie, elements that [surround | contain]^1 the word). For inline mode, that included ancestors that were outside the editor element.

If a `lang` attribute existed anywhere in the ancestry of a word for a {productname} instance running in inline mode, that `lang` attribute value overrode all attempts by the user to set the spell checking `lang` for the document.

As of {productname} 6.3, the `lang` attribute inherits the default settings for the {productname} editor body. As a consequence, the editor no longer searches elements external to the editor body when searching for `lang` attributes.

For information on the **Spellchecker Pro** plugin, see: xref:introduction-to-tiny-spellchecker.adoc[Spellchecker Pro].

// @bforte added the below for Spelling AutoCorrect
=== Spelling Autocorrect: (premium plugin)

==== Removed redundant "pre-text" punctuation, before the word at the start of the sentence being capitalized, from start and replacement of text-pattern.

In Spelling Autocorrect with `capitalization` enabled, any format which was applied at the beginning of a new sentence, after a full stop but before the start of the word, would be lost when the word is `capitalized` and replaced by the format at the end of the previous sentence. 

In {productname} 6.3, this format is now retained when the word is capitalized.
// end
[[accompanying-premium-skins-and-icon-packs-changes]]
== Accompanying Premium Skins and Icon Packs changes

The {productname} 6.3 release includes an accompanying release of the **Premium Skins and Icon Packs**.

=== Premium Skins and Icon Packs

The **Premium Skins and Icon Packs** release includes the following updates:

// premium skins and icon packs change documentation here.

The **Premium Skins and Icon Packs** were rebuilt to pull in the changes also incorporated into the default {productname} 6.3 skin, Oxide.

For information on using premium skins and icon packs, see: xref:premium-skins-and-icons.adoc[Premium Skins and Icon Packs].

[[improvements]]
== Improvements

{productname} 6.3 also includes the following improvements

=== Colorswatch now displays a checkmark for selected color.

// https://ephocks.atlassian.net/browse/TINY-9283
// cause
// consequence
// fix
// result
// https://www.notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== Color picker dialog now starts on the appropriate color for the cursor position.

// https://ephocks.atlassian.net/browse/TINY-9213
// @bforte review required.
{productname} 6.3 introduced a new improvement to the color picker dialog that allows the user to easily identify the pre-populated color for the `selected-text` with a visual ✔️ which is nested inside the color box dialog associated with the user `text-selection` within the editor.

The benefits from this improvement is that it allows the user to easily identify the location for the default/custom color in the dialog based on the current `text-selection`, and identifying the #Hex value for the `selected` color when the user hovers over a color in the dialog.

With {productname} 6.3 the `getCurrentColor` now checks for the first found `backcolor` and `forecolor` color before the parent color based on the user cursor positioning.

// https://www.notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


[[additions]]
== Additions

{productname} 6.3 also includes the following additions:

=== New expand function added to tinymce.selection which expands the selection around the nearest word.
=== New expand function added to tinymce.dom.RangeUtils to return a new range expanded around the nearest word.

// https://ephocks.atlassian.net/browse/TINY-9001
// @bforte re-review as small changes where made to cover the `tinymce.dom.RangeUtils` also in more detail.
{productname} 6.3 introduced two new API functions that allow a user to select a word from the insertion point location which applies a new `expand` feature.

This new `tinymce.selection` API function allows {productname} users and developers to expand the selection range to contain the entire word when the selection is collapsed within the word.

To support this new API function, {product name} 6.3 introduced `tinymce.dom.RangeUtils`, which is focuses on a new `expand` method range that expands around the entire word that the user selection was collapsed within by the `tinymce.selection` API function.

If, in the following example, a user places the insertion point between the first and second `m` in the word, `comment`, then clicks the _Add comment_ toolbar button, or selects _Insert > Add comment_ from the TinyMCE menu, or presses the _Add comment_ keyboard shortcut  (eg ⌘+⌥+M) — 

[source,html]
----
<p>
  <span class="mce-annotation tox-comment" 
  	data-mce-annotation-uid="mce-conversation_58585987121669010253247" 
	data-mce-annotation="tinycomments">Comment</span>
</p>
----

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== New color_map_background and color_map_foreground option which sets the base colors used in the backcolor and forecolor toolbar buttons and menu items.
=== Added optional storageKey property to colorinput component and colorswatch fancy menu item.

// https://ephocks.atlassian.net/browse/TINY-9184
// @bforte review required
{productname} 6.3 introduced two new palettes for the `color_map_background` and `color_map_foreground`, which have now been separated.  In {productname} 6.3, when a user adds a custom color to the `color_map_background` pallet, the editor will not replicate the new color in the `color_map_foreground` pallet as it used to.

The feature introduced changes to the `colorcache` which is no longer considered to be a singleton.  The `colorcache` can now be accessed with the help of a custom ID, which can now create custom `color_map` colors, selected by the user to be assigned to either the `backcolor` or `forecolor` pallets separately.

To accompany this feature {productmame} 6.3 now allows for separate `storage` keys to be created for the pre-provided colors in `color_map_forground` and `color_map_background` respectively, and versions for `color_cols`.

These will still `default` to the shared or previous values as before, if no separate values are set.
In addition one can now access these as a `developer`.


Key feature points saw the introduction for new expanded sets for `color_map` and `color_col`.  And the added optional `storageKey` property to `colorinput` component and `colorswatch`.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== New addView function added to editor.ui.registry which makes it possible to register custom editor views.
=== New ToggleView command which makes it possible to hide or show registered custom views.

// https://ephocks.atlassian.net/browse/TINY-9210
// @bforte review required -- Feedback provided is to keep this minimal.
{productname} 6.3 now gives users the ability to register `custom` editor views with use of the new  `addView` API.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== New color_default_foreground and color_default_background options to set the initial default color for the forecolor and backcolor toolbar buttons and menu items.

// https://ephocks.atlassian.net/browse/TINY-9183
// @bforte review required.
{productname} 6.3 adds a new feature that allows the default color for the `color_default_foreground` and `color_default_background` in the toolbar button menu to be pre-defined.

The `color_default_foreground` and `color_default_background` colors are pre-defined by including them in `tinymce.init`

In the example below, the foreground color is set to red and the background color is set to a shade of cyan.

As the example shows, these colors can be defined by either name or hex #.

[source,js]
----
<script type="text/javascript">
tinymce.init({
    selector: "textarea",
	color_default_background: 'red',
	color_default_foreground: '#0DEDFF',
	toolbar: 'forecolor backcolor fontsize'
});
</script>
----

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480

=== New getTransparentElements function added to tinymce.html.Schema to return a map object of transparent HTML elements.
=== Transparent elements, like anchors, are now allowed in the root of the editor body if they contain blocks.
=== Transparent elements, like anchors, can now contain block elements.
// https://ephocks.atlassian.net/browse/TINY-9172
// @bforte review required
In {productname} 6.3 block level links are now supported.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480

=== Added `ToggleToolbarDrawer` event to subscribe to toolbar’s opening and closing. 

// https://ephocks.atlassian.net/browse/TINY-9271
In {productname} 6.3 a new event was added that allows the `ToggleToolbarDrawer` to subscribe to the toolbar's opening and closing actions.

In previous versions of {productname}, when the `ToggleToolbarDrawer` was set to `toolbar_mode: "sliding"` or `toolbar_mode: “floating”,` the `ToggleToolbarDrawer` did not create an opening or closing event.

With {productname} 6.3, a new feature has been introduced to ensure that, when the `ToggleToolbarDrawer` is triggered, the new event initializes an `onToggle` callback that propagates the `OuterContainer` component for `SplitSlidingToolbar` and `SplitFloatingToolbar`.

Once the `OuterContainer` component event is triggered, the console records either a `true` or `false` action that calls on the `onToggled` callback which supports the `FloatingToolbarButton` and `SplitFloatingToolbar` components.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480



[[changes]]
== Changes

{productname} 6.3 also incorporates the following changes:

=== Colorswatch keyboard navigation now starts on currently selected color if present in the colorswatch.

// https://ephocks.atlassian.net/browse/TINY-9283
// cause
// consequence
// fix
// result
// https://www.notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== `setContent` is now allowed to accept any custom keys and values as a second options argument.

// https://ephocks.atlassian.net/browse/TINY-9143
// @bforte review required
In {productname} 6.3 release, changes have been made to the `setContent` feature that now allows the editor to accept any custom `[key: string]: (value) any;` as a second option argument when the user inserts content.

The improvements to this feature give the user more flexibility with the `getContent` and `setContent` features.

New tests have been added to the `setContent` feature in {product name} 6.3 that now checks if content manipulation in `BeforeSetContent` callback is possible so it can pass the custom data `object` to the `getContent` feature allowing it to set both the content and action events.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


[[bug-fixes]]
== Bug fixes

{productname} 6.3 also includes the following bug fixes:

=== Parsing media content would cause a memory leak, which for example occurred when using the getContent API.

// https://ephocks.atlassian.net/browse/TINY-9186
A memory leak occurred in Chrome, Edge and Firefox browsers when media content was parsed into the editor using the `tinymce.activeEditor.getContent()` method API.

The memory leak caused an abnormal behavior that increased the memory requirements of the editor until the active tab in the browser crashed.

// Edit the notes below into a useful sentence.
////
Fixed in v6.3 update. (Reported issues with Chromium) https://bugs.chromium.org/p/chromium/issues/detail?id=1374180[Memory leak with DOMParser parseFromString method]
////

=== Dragging a noneditable element toward the bottom edge would cause the page to scroll up.

// https://ephocks.atlassian.net/browse/TINY-9025
A regression was found in {productname} 6.2 where dragging an element containing a `contentEditable=false` attribute towards a document’s edge did not cause scrolling.

It was also found that dragging elements containing a `contentEditable=false` attribute toward the bottom edge cause similar behaviour. In this instance, however, when the elements containing a `contentEditable=false` attribute was dragged to the bottom of the page the editor would sometimes scroll up.

This regression has been addressed in {productname} 6.3. Dragging elements containing a `contentEditable=false` attribute towards a document’s causes the viewport to scroll as expected. And dragging elements containing a `contentEditable=false` attribute toward the bottom edge of the editor no longer causes the page to scroll up.


=== Range expanding capabilities would behave inconsistently depending on where the cursor was placed.

// https://ephocks.atlassian.net/browse/TINY-9029
// @bforte review required.
In previous versions of {productname}, the behavior for the `ExpandRange.ts:expandRng()` function was to set both the range just `before` and just `after` a word in a string which was not the case.

As a result of the issue, it was discovered that the string `ExpandRange.ts:expandRng()` function that checks the location of the user cursor before and after was affecting the for-loop in `walkText-implementation`.

Fixes were applied to the `tinymce.activeEditor.selection.expand()` function which is responsible for directly affecting the white space next to a word that is accompanied with a `space-separated` instance.  In {productname} 6.3, the `ExpandRange.ts:expandRng()` function now behaves as intended with any element such as text, special character, styles or elements with contenteditable="false” attributes.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== Compilation errors were thrown when using TypeScript 4.8.

// https://ephocks.atlassian.net/browse/TINY-9161
// @bforte review required (Feedback >> Ben + Luke mentioned not something we need to really cover!)
Note: With the release for 6.3, {productname} made updates to the latest `rollup-plugin-dts` versions to pull in a fix that was generating invalid generics.  The update allowed for a smooth transition from `typescript`: “^4.7.4” to `typescript`: "^4.8.3" which also fixed various compilation errors that were occurring.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== Line separator scrolling in floating toolbars.

// https://ephocks.atlassian.net/browse/TINY-8948
In {productname} 6.0.3 the background images in the floating toolbar followed the scroll position of any nested scrolling containers when the editor width was reduced by the browser. By default, however, the background images should scroll with the main scrollable element, `+<body>+`.

As a consequence the divider lines that act as background image to improve the UI would not follow the scroll position of any nested containers inside the floating toolbar.

In {productname} 6.3 background images now scroll with the toolbar’s content as expected.


// Should the following be: here; in xref:known-issues[Known issues] below; nowhere at all?
////
KNOWN ISSUES: `Safari 14 not properly supporting local value for background attachment property`

We explicitly support the current version of

Google Chrome;
Mozilla Firefox;
Microsoft Edge; and
Apple Safari

We also provide

_support for the prior major version for 60 days after the release has been superseded by a new major version_
////

=== A double bottom border appeared on inline mode editor for the tinymce-5 skin.

// https://ephocks.atlassian.net/browse/TINY-9108
The `inline-mode` toolbar showed an additional border line with {productname} 6.x premium skins that used {productname} 5.x skin packages.

With {productname} 6.3, all {productname} premium skins were updated.


=== The editor header showed up even with no menubar and toolbar configured.

// https://ephocks.atlassian.net/browse/TINY-8819
In classic mode, when both the {productname} toolbar and menubar were disabled, a header was still visible at the top of the editor. 

In {productname} 6.3 this header no longer presents when the {productname} toolbar and menubar are disable, giving the editor a cleaner appearance with only the content editor visible.


=== Inline text pattern no longer triggers if it matches only the end but not the start.
=== Matches of inline text patterns that are similar are now managed correctly.

// https://ephocks.atlassian.net/browse/TINY-8947
// https://ephocks.atlassian.net/browse/TINY-8949
// @bforte review required 2x versions for suggestions (MERGED 8949 into this!)
Previously, to check if something matched a pattern, {productname} would first search for the end pattern and then check if the offset was long enough to be the start pattern.

For example, consider a pattern that has a start = `**` and an end = `**`. And a document that consists of the following string: `a *test**`.

{productname} would find the end — `**` — and would then look for the the offset between the two elements as length 2(` *`).

In this circumstance, {productname} returned a match because the search mechanism searched within the nodes. Using the previous mechanism a start pattern like `**` would match, for example, `*<span class="not-visible"></span>*`.

Example of what would happen when the issue would occur.

`a *test**` became `a<em>test</em>`

In {productname} 6.3 the mechanism now directly checks the text, and the text only, avoiding the errors caused by the previous mechanism.


Notes

The above edit still leaves me cold.

What does start = `**` mean?

Is `**` a string an end-user would enter, or a string an integrator would add to a configuration or other setup?

If we have examples, are they in a particular syntax? Should they be presented as AsciiDoc code-blocks for syntax highlighting and, consequently, easier parsing? For example (and making a blind guess as to the underlying syntax):

For example:

[source,grep]
----
a *test**
----

would become

[source,grep]
----
a<em>test</em>
----

Also, even re-presented like this, I’m unsure what _this_ becoming _that_ means?

// @bforte version 2 for the above.
Previously, to check if something matched a pattern, {productname} would first search for the end pattern and then check if the offset was long enough to be the start pattern.

For example, consider you want to wrap a specific `text-selection` with a font-style `bold`. In previous versions of {productname}, when applying a pattern to apply font-styling `bold` you would add text pattern `**` before_the_word and `**` after_the_word, such as this `example *bold*`.

{productname} would find the end `**` after_the_word and would then look for text pattern `**` before_the_word , but specifically for any offsets in between the two elements as length 2 (`**` equivilant to ` *` or `11` == `node_1,node2`).

In this circumstance, `example bold*` would return a match because the search mechanism would check for the available node spaces before_the_word and `**` after_the_word.For example:

[source,grep]
----
example bold* // renders `examplebold `
----

[source,grep]
----
<p>example<strong>bold</strong>&nbsp;</p>
----
The example above detected `1` missing text pattern, but also `1` available node space which triggered the mechanism to remove the node space _after_the_last_word, while replacing the missing text pattern `⤴*` _before_the_word.

In {productname} 6.3 the mechanism now directly checks the text pattern before_the_word and _after_the_word only and apply the closest match based on the text patterns entered. Noted: If the user enter’s an incorrect text pattern that does not match both _before_the_word and after_the_word, the trailing text pattern will remain.For example:

[source,grep]
----
example bold* // renders `example bold* 
----

[source,grep]
----
<p>example <em>bold</em>*&nbsp;</p>
----
// end

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== The context toolbar prevented the user from placing the cursor at the edges of the editor.

// https://ephocks.atlassian.net/browse/TINY-8890
When scrolled past the top row of a table, the table _context toolbar_ overlapped any rows at the top of the editor to display below the toolbar.

In {productname} 5.x, the _context toolbar_ switched from being at the top of the editor, to the bottom of the table or editor when a user attempted to select cells close to the top row of the table. And vice versa when the _context toolbar_ was docked to the bottom of the editor.

In {productname} 6.x, the height of the _context toolbar_ was increased, while the distance from which it needed to be selected in order to switch locations was not.

With {productname} 6.3 this distance has been increased. This allows the _context toolbar_ to correctly switch locations when a user selects cells close to the toolbar, allowing the top or bottom visible rows of a table to be selected without issue when the _context toolbar_ is visible.


=== The Quick Insert context toolbar provided by the quickbars plugin showed when the cursor was in a fake block caret.

// https://ephocks.atlassian.net/browse/TINY-9190
The Quick Insert context toolbar, provided by the xref:quickbars.adoc[Quick Toolbars] plugin, was displayed when the cursor was moved to the left of an element with a `contenteditable="false"` attribute.

This behavior was unexpected because the Quick Insert context toolbar should not present when the insertion point is placed on a line with content.

The root cause was the insertion point being placed into a fake block caret, which was not considered by the logic for toggling the Quick Insert context toolbar.

A fix was applied to the logic to ensure it could handle such cases, and prevent it from showing in this circumstance.


=== The editor.selection.getRng() API was not returning a proper range on hidden editors in Firefox.
=== The editor.selection.getBookmark() API was not returning a proper bookmark on hidden editors in Firefox.

// https://ephocks.atlassian.net/browse/TINY-9259
In contrast to other supported browsers, Firefox did not return the selected object or the selection range from iframes that are hidden by the `display: none` attribute.

As a consequence, when a {productname} instance was running on Firefox, the `window.getSelection()` API for an iframe returned `null` if the iframe was hidden. This, further, resulted in the `editor.selection.getRng()` and `editor.selection.getBookmark()` APIs returning incorrect data from hidden editors when Firefox was the host browser.

This has been fixed in {productname} 6.3. All browsers, including Firefox, now return the correct values even when the iframe is hidden.


=== Dragging a noneditable element before or after another noneditable element now works correctly.

// https://ephocks.atlassian.net/browse/TINY-9253
Elements that had the `contenteditable="false"` attribute set could not be dragged to the left of an ancestor element.

For example in the following

[source,html]
----
<p>Text in a paragraph tag with a span of <span contenteditable="false">non-editable text</span> inside.</p>
----

the string _non-editable text_ could not be dragged to before the opening `+<p>+` tag.

{productname} 6.3 can place a fake insertion point next to elements with a `contenteditable="false"` attribute when another element with a `contenteditable="false"` attribute is dragged, allowing the object to be moved before and after other such elements.


=== The restored selection after a redo or undo action was not scrolled into view.

// https://ephocks.atlassian.net/browse/TINY-9222
// @bforte pending review
Prior to the {productname} 6.3 release, executing an undo or redo function in the editor would not scroll to `show` the new cursor location after the function is executed, meaning the user would have to manually scroll to their last `undo` or `redo` position.

With the {productname} 6.3 release, a fix was applied to allow the scroll function to reposition the users caret to the last known `undo` or `redo` location.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== A newline could not be inserted when the selection was restored from a bookmark after an inline contenteditable="false" element.

// https://ephocks.atlassian.net/browse/TINY-9194
// @bforte pending review
In versions of {productname}, the `Enter` key would not move the caret after a `mergeTag` insertion occurred in the editor.

This meant that a newline could not be inserted when the selection was restored from a `bookmark` positioning after an inline `contenteditable="false"` element.

A fix was applied to the core `SelectionOverrides` settings to ensure that the user selection restores from the `bookmark` positioning before and after a `contenteditable="false"` element in {product name} 6.3.
// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


=== Inline mode did not respect `content_css_cors` option.

// https://ephocks.atlassian.net/browse/TINY-6037
In previous versions of {productname}, the `tinymce.styleSheetLoader` global was not configured by the `content_css_cors` option, when specified.

Consequently, stylesheets loaded by `tinymce` onto the outer document page did not have the `crossOrigin="anonymous"` attribute. This particularly effected {productname} instances running in inline mode, because the `tinymce.styleSheetLoader` global is used to load stylesheets used by inline editors. (Stylesheets for {productname} editors running in iframe mode are specific to the editor.)

Without the `crossOrigins="anonymous"` attribute being set, no external stylesheets were loaded. And inline editors with the `pageembed` plugin loaded and the `tiny_pageembed_inline_styles` option set to `true` would, as a result, return an error when attempting to insert any iframse through the dialog.

As of {productname} 6.3, the `content_css_cors` option now configures the `tinymce.dom.styleSheetLoader` global when specified. This allows the `crossOrigin="anonymous"` attribute to be added to all stylesheets loaded by the editor — including editors running in inline mode — when the attribute is set to true.


=== The caret was moved to the previous line when a text pattern executed a `mceInsertContent` command on Enter key when running on Firefox.

// https://ephocks.atlassian.net/browse/TINY-9193
// @bforte review required.
In previous versions of {productname}, Firefox would display unusual behavioural characteristics after a specific sequence of commands were executed, causing text patterns to force the caret position to the previous line.

As a result, users that where using (a) The specific browser `firefox` (b) Previous versions of {productname}, this would create UX issues when the user would try to create a `mergeTag` directly after a `Enter` execution from the previous line in the editor.

In {productname} 6.3, users or developers that work inside of `Firefox` can now create `mergeTags` without the caret changing position based on a `Enter` execution.

// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


[[security-fixes]]
== Security fixes

{productname} 6.3 includes fixes for the following security issues:

=== are there any security fixes in this release?

// https://ephocks.atlassian.net/browse/[ticket-number-for-any-security-fixes]
// cause
// consequence
// fix
// result
// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480


[[deprecated]]
== Deprecated

=== are there any deprecations in this release?

// https://ephocks.atlassian.net/browse/[ticket-number-for-any-deprecations]
// cause
// consequence
// fix
// result
// https://notion.so/tinycloud/Four-words-to-live-by-96e307110aaa4137b94f9ba12874d480



[[known-issues]]
== Known issues

This section describes issues that users of {productname} 6.3 may encounter and possible workarounds for these issues.

There is a known issue in {productname} 6.3 when the new xref:advanced-typography.adoc[Advanced Typography] Premium plugin is used.

=== After switching the Advanced Typography language to en-GB, switching to any other language is not possible 

// https://ephocks.atlassian.net/browse/TINY-9332
// cause
// consequence
// workaround (if any)



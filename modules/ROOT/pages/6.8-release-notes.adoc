= TinyMCE 6.8
:navtitle: TinyMCE 6.8
:description: Release notes for TinyMCE 6.8
:keywords: releasenotes, new, changes, bugfixes
:page-toclevels: 1

include::partial$misc/admon-releasenotes-for-stable.adoc[]

[[overview]]
== Overview

{productname} 6.8 was released for {enterpriseversion} and {cloudname} on <weekday>, <month> <DD>^<st|nd|rd|th>^, <YYYY>. These release notes provide an overview of the changes for {productname} 6.8, including:

// Remove sections and section boilerplates as necessary.
// Pluralise as necessary or remove the placeholder plural marker.
* xref:new-premium-plugin<s>[New Premium plugin<s>]
* xref:new-open-source-plugin<s>[New Open Source plugin<s>]
* xref:accompanying-premium-plugin-changes[Accompanying Premium plugin changes]
* xref:accompanying-premium-plugin-end-of-life-announcement[Accompanying Premium plugin end-of-life announcement]
* xref:accompanying-open-source-plugin-end-of-life-announcement[Accompanying open source plugin end-of-life-announcement]
* xref:accompanying-premium-skins-and-icon-packs-changes[Accompanying Premium Skins and Icon Packs changes]
* xref:improvements[Improvements]
* xref:additions[Additions]
* xref:changes[Changes]
* xref:bug-fixes[Bug fixes]
* xref:known-issues[Known issues]
* xref:security-fixes[Security fixes]


[[new-premium-plugin<s>]]
New Premium plugin<s>

The following new Premium plugin was released alongside {productname} 6.8.

=== <Premium plugin name> 1.0.0

The new Premium plugin, **<Premium plugin name>** // description here.

For information on the **<Premium plugin name>** see xref:<plugincode>.adoc[<Premium plugin name>].


[[new-open-source-plugin]]
== New Open Source plugin

The following new Open Source plugin was released alongside {productname} 6.8.

=== <Open source plugin name> 1.0.0

The new open source plugin, **<Open source plugin name>** // description here.

For information on the **<Open source plugin name>** plugin see xref:<plugincode>.adoc[<Open source plugin name>].


[[accompanying-premium-plugin-changes]]
== Accompanying Premium plugin changes

The following premium plugin updates were released alongside {productname} 6.8.

=== Accessibility Checker 3.2.2

The {productname} 6.8 release includes an accompanying release of the **Accessibility Checker** premium plugin.

**Accessibility Checker** 3.2.2 includes the following fix.

==== Safari focus visible not applying a blue outline to all buttons
// #TINY-9330

// CCFR here.


For information on the **Accessibility Checker** plugin, see: xref:a11ychecker.adoc[Accessibility Checker].

=== Advanced Templates 1.4.0

The {productname} 6.8 release includes an accompanying release of the **Advanced Templates** premium plugin.

**Advanced Templates** 1.4.0 includes the following addition.

==== AdvTemplate add fixed {{clipboard}} marker
// #TINY-9974
**Advanced Template** 1.4.0 introduces a new feature that allows templates to now include special markers, denoted as `+{{mce-clipboard}}+`. These markers serve as placeholders that indicate where clipboard content should be inserted once the template is added to the editor's content.

The string to add is as follows: `+{{mce-clipboard}}+`.

.Example
[source, javascript]
----
tinymce.init({
  selector: "textarea",
  plugins: [ "code", "advtemplate", "undo", "redo", "mergetags", ],
  toolbar: "inserttemplate | undo redo | mergetags",
  advtemplate_templates: [
    {
      title: 'mce-clipboard template',
      items: [
        {
          id: '1',
	  title: 'clipboard',
          content: '{{mce-clipboard}}'
        },
      ],
    },
  ],
});
----

As a result, when a user inserts a template containing the `+{{mce-clipboard}}+` marker, the editor will replace these markers with the actual content from the clipboard. This dynamic replacement ensures that users can effortlessly integrate clipboard content into their templates without the need for additional copy-pasting steps.

For information on the **Advanced Templates** plugin, see: xref:advanced-templates.adoc[Advanced Templates].

=== AI Assistant 1.1.1

The {productname} 6.8 release includes an accompanying release of the **AI Assistant** premium plugin.

**AI Assistant** 1.1.1 includes the following addition, improvement, and bug fix:

=== AI Chat History Skin CSS
//#TINY-10214

==== Add selection-based option to ai shortcuts to restrict shortcut misuse
//#TINY-10159


==== AI is functional when in a `editable_root: false` root.
// TINY-10100
//CCFR

For information on the **AI Assistant** plugin, see: xref:ai.adoc[AI Assistant].

==== Tabbing/Shift-tabbing and `focus` issues with AI Assistant in OSX Safari
// TINY-10105
//CCFR

For information on the **AI Assistant** plugin, see: xref:ai.adoc[AI Assistant].

=== Comments 3.3.4

The {productname} 6.8 release includes an accompanying release of the **Comments** premium plugin.

=== Switching from an empty paragraph to a section with a comment didn't enable `Add comment...` textarea.
//#TINY-10173
In previous versions of {productname}, occasionally the sidebar would unexpectedly be set as readonly due to a invalid selection state.

As a consequence, when the user moved the cursor from an empty element to a commented text selection, the sidebar and comments section would change to be readonly.

{productname} 6.8 addresses this issue, now, when the editor verifiys that the sidebar state should set as readonly `false`, it also update invalid selection to `false`, so both states do not affect the sidebar state.

For information on the **Comments** plugin, see: xref:introduction-to-tiny-comments.adoc[Comments plugin].

=== PowerPaste 6.2.3

The {productname} 6.8 release includes an accompanying release of the **PowerPaste** premium plugin.

**PowerPaste** 6.2.3 includes the following bug-fixes:

=== Safari - Improve pasting content with sidebar comments from the Word document
// TINY-10229
//CCFR

=== Pasting underlined content from MS Word with PowerPaste results in empty rows being underlined
// TINY-10178
Previously, when a user pasted content from Word, the pasted content would be converted to: 

[source, html]
----
<p><s>Sold out on tickets.</s></p>
<p><u>&nbsp;</u></p>
<p>Sorry!</p>
----

As  a consequence, two distinct behaviours were apparent.

. Firstly, the content displayed in Word did **not** render an underline for the second line, but only as an empty line.
. In {productname} the same content renders an underline in the second line.

To fix this , when a paragraph contains no content except for a `+&nbsp;+`, then PowerPaste would unwrap that specific paragraph so that it becomes: 

[source, html]
----
<p>&nbsp;</p>
----

Instead of: 

[source, html]
----
<p><u>&nbsp;</u></p>
----
**Powerpaste 6.4.2** addresses this issue, now, when a paragraph contains a `+&nbsp;+` within the copied text content, the inner `s` tags, `u` tags and `spans` are removed on paste.

=== Powerpaste pasting causes window to be scrolled when editor isn't fully visible
// TINY-10172
//CCFR

=== Spell Checker Pro 3.3.1

The {productname} 6.7.0 release includes an accompanying release of the **Spell Checker Pro** premium plugin.

**Spell Checker Pro** 3.3.1 includes the following bug-fixes:

=== Spellchecker does not trigger on shift+enter
// TINY-10285
Previously, while pressing **Enter**, **Spacebar** or changing context within the editor after a incorrectly spelled word would trigger the **Spell Checker Pro** plugin. Although it was discovered that after pressing **Shift+Enter**, the plugin failed to trigger, as the initial implementation did not consider this keypress as a space, or as a change to the context.

{productname} 6.8 addresses this issue, now, the **Spell Checker Pro** mechanism is triggered by either **Space**, **Enter** or **Shift+Enter**.

For information on the **Spell Checker Pro** plugin, see: xref:introduction-to-tiny-spellchecker.adoc[Spell Checker Pro plugin]

=== Advanced Typography 1.1.3

The {productname} 6.8 release includes an accompanying release of the **Advanced Typography** premium plugin.

**Advanced Typography** 1.1.3 includes one fix:

==== If tinymcespellchecker and typography are both loaded, tinymcespellchecker prevents typography from transforming the string, (tm) into the character ‚Ñ¢.
//#TINY-9963
Previously when the {productname} **Spell Checker Pro** plugin and the **Advanced Typography** plugin where both loaded, the **Spell Checker Pro** plugin would prevent the **Advanced Typography** plugin from transforming the string, `(tm)` into the character `™`.

The **Spell Checker Pro** originally would wrap elements with a fake element to underline misspelled words, and as the **Advanced Typography** plugin is designed to detect wrapped elements from the spellchecker, this resulted in it parsing 'tm' instead of `(tm)`.

{productname} 6.8 addresses this issue, now, the **Advanced Typography** parser utilizes functionality provided by internal library, which enables it to identify both the prefix and suffix of an element.

As a result when the **Advanced Typography**  plugin encounters a string 'tm' the system also checks for the presence of parentheses before and after, to ensure it correctly transform's any instance of `(tm)` to `™`.

For information on the **Advanced Typography** plugin, see: xref:advanced-typography.adoc[Advanced Typography].


[[accompanying-premium-plugin-end-of-life-announcement]]
== Accompanying Premium plugin end-of-life announcement

The following Premium plugin has been announced as reaching its end-of-life:

=== <Premium plugin name eol>

{productname}’s xref:<plugincode>.adoc[<Premium plugin name eol>] plugin will be deactivated on <month> <DD>, <YYYY>, and is no longer available for purchase.


[[accompanying-premium-skins-and-icon-packs-changes]]
== Accompanying Premium Skins and Icon Packs changes

The {productname} 6.8 release includes an accompanying release of the **Premium Skins and Icon Packs**.

=== Premium Skins and Icon Packs

The **Premium Skins and Icon Packs** release includes the following updates:

The **Premium Skins and Icon Packs** were rebuilt to pull in the changes also incorporated into the default {productname} 6.8 skin, Oxide.

For information on using premium skins and icon packs, see: xref:premium-skins-and-icons.adoc[Premium Skins and Icon Packs].


[[improvements]]
== Improvements

{productname} 6.8 also includes the following improvement<s>:


=== Colorpicker now includes the Brightness/Saturation selector and hue slider in the keyboard navigable items.
// #TINY-9287

=== Improved the tooltips of picker buttons for the urlinput components in the "Insert/Edit Image" and "Insert/Edit Link" dialogs.
// #TINY-10155
In previous versions of {productname}, the tooltips of file picker buttons of `urlinput` dialog components assumed the label of the component.

Consequently, the tooltip does not always clearly indicate the functionality of the file picker button. This affected the `urlinput` dialog components in the **Insert/Edit Link**, **Insert/Edit Image**, and **Insert/Edit Media** dialogs.

In {productname} 6.8, the tooltips of `urlinput` file picker buttons on affected dialogs have been improved as follows:

[cols="h,1,1,1",options="header"]
|===============================================================
|     | Insert/Edit Link | Insert/Edit Image | Insert/Edit Media
| Old | "URL"            | "Source"          | "Source"         
| New | "Browse links"   | "Browse files"    | "Browse files"   
|===============================================================

=== Inline dialog will now respect size: 'large' argument in the dialog spec.
// #TINY-10209
In previous versions of {productname}, when a dialog was redialed with a new `size` value, that value would have no effect on the size of the dialog. 

In {productname} 6.8, now, the size of the dialog is updated when the dialog is redialed with a spec containing a new `size` that is different from the current size.

=== SVG elements and their children are now retained when configured as valid elements.
// #TINY-10237
Previously, when a user attempted to insert an SVG element using the code editor or any other method of content insertion, the SVG would not be properly retained inside the editor, even if the integrator had enabled SVG support.

With the release of {productname} 6.8, a new code has been introduced to skip the normal processing of SVG elements, treating them as foreign objects.

As a result, SVG and its sub-elements are now retained as-is if they were configured as extended_valid_elements to include SVG elements.

=== Bespoke dropdown toolbar buttons including align, fontfamily, fontsize, blocks, and styles did not include their visible text labels in their accessible names.
// #TINY-10147
Prior to {productname} 6.8, accessibility labels of bespoke dropdown buttons only announced the name of the button, and not the visible text label of the selected option.

For example, when the `fontfamily` dropdown button selection was set to “Verdana”, the accessibility name was set as “Fonts”. However, it should have been set as “Fonts Verdana” as the selected option is also visible on the button.

In {productname} 6.8, the visible text label _(or icon name where icons are present instead)_ of selected options of bespoke dropdown buttons are appended to the accessible name. This ensures that the accessible name of the above scenario is announced as “Fonts Verdana”, improving accessibility.


[[additions]]
== Additions

{productname} 6.8 also includes the following additions:

////
waiting for confirmation on these new feature tickets.
=== Detect markdown on paste, and convert to HTML
// #TINY-10199

=== Wrap markdown lib with API calls
// #TINY-10198

////

=== <TINY-vwxyz 1 changelog entry>
//#TINY-vwxyz1

// CCFR here.


[[changes]]
== Changes

=== <TINY-vwxyz 1 changelog entry>
//#TINY-vwxyz1


[[bug-fixes]]
== Bug fixes

{productname} 6.8 also includes the following bug fix<es>:

=== Pressing Enter when focusing on the `details` component for an Accordion deletes its structure.
// #TINY-10177
Previously, clicking on the expand arrow of a `details` element would result in the editor selection to be external of the `summary` element when the host browser was Safari.

As a consequence, the plugin failed to detect if the selection was at the beginning of the `details` element, which resulted in a unsuccessful attempt to toggle the Accordion component when the **Enter** key is pressed

{productname} 6.8 addresses this issue, now, the predicate considers that the selection can be right before the `summary` element, so the Accordion toggling can work as expected on Safari.

=== Adjacent SVG block level elements adds extra paragraph
// #TINY-10273

=== Anchor elements inside SVG elements gets the `data-mce-block`
// #TINY-10272

=== Backspace/delete can be performed on selected SVG elements in Firefox
// #TINY-10271

=== Floating toolbar rendering issue with flexbox layout on page body element
// #TINY-9847

=== A closing notification brings focus to the editor even when focus is outside of the editor
// #TINY-10282

=== Selecting a cell with only `&nbsp;` in a table inside a `td` and then press `backspace` the entire table is deleted
// #TINY-10254
Previously, the editor checked the number of tables included in a selection by identifying the closest parent to the selected elements within the table. However, when selecting part of a nested table along with some other element, two different tables were detected: the nested one and the one containing both the nested table and the additional element.

The consequence of this issue was that deleting the selection emptied the main table containing the additional element because it was the last part of the selection, and the selection also included another table (the nested one). Since the entire nested table was contained in the main table, it was completely deleted as well.

{productname} 6.8 addresses this issue, now the editor recognizes this scenario and manages it as if the additional element was not contained in any table. As a result, the deletion now behaves as if it were outside a table, and it functions as expected.

=== All applied inline formats are lost when format is removed.
// #TINY-10132
Previously, a formatted caret was mistakenly perceived as an empty element, which resulted in,

* a unintended consequence which forced the editor to clear the entire editor DOM when toggling the formatted node, and;
* the de-formatting logic which iterates from the **innermost** to the **outermost** formatted node until a match is found, **failed** to execute the expected behavior as it did not account for parent formatted nodes.

However, with the recent fix in {productname} 6.8, the caret is now disregarded when clearing the editor, and before removing the caret format, the system now checks if the matching format node is **non-nullable** and retrieves the parent nodes when necessary.

As a result, formatting can now be correctly removed in both empty and non-empty editors.

=== Editor would convert urls that are not http/s or relative resulting in broken links.
// #TINY-10153
In previous versions of {productname}, when using the **Link Plugin**, and inserting a link that is not http/s or relative (such as onenote link), the editor would modify/update the link by adding a new hostname to the url.

{productname} 6.8 addresses this issue, now, the editor no longer changes links that are not http/s or relative.

=== Calling the setProgressState API would cause the window to be scrolled when the editor wasn't fully visible.
// #TINY-10172

=== Applying heading formatting to the content of the summary element extended its application to the content of the parent details element.
// #TINY-10154
Previously, editor schema heading elements were **invalid** children of a `<summary>` node within the Accordion component.

As a consequence of this, any attempt to apply a heading format to the `<summary>` content within the Accordion component was unsuccessful.

{productname} 6.8 addresses this issue, updates have been applied to the editor schema for heading elements, so they can now be converted as **valid** children of the `<summary>` element.

=== Resize handles would not appear on editable images in a non-editable context.
// #TINY-10118
In previous versions of {productname}, a regression was identified that affected images nested within a `NonEditable` section.

As a consequence, the editor would only check the parent element within a nested editable section, which neglected to inspect the image itself and treated the image as a readonly element, rendering it uneditable.

{productname} 6.8 addresses this issue, now, the editor checks the **"readonly"** attribute on images, rather than just the parent element.

=== Setting the content with an attribute that contains a self-closing HTML tag did not preserve the tag.
// #TINY-10088
In previous versions of **DOMPurify**, a critical issue was identified where attributes containing the self-closing `+/>+` tags were erroneously removed during the sanitization process.

This issue stemmed from a older version of DOMPurify was inadvertently truncating attributes associated with self-closing tags.

.Truncated attributes
[source, html]
----
<div>Attribute with empty element (&lt;br/&gt;)</div>
----

.Expected attributes
[source, html]
----
<div data-macro-parameters="title=<br/>">Attribute with empty element (&lt;br/&gt;)</div>
----

As a consequence, the removal of these attributes by **DOMPurify** would cause significant problems in the users web applications.

{productname} 6.8 addresses this issue by updating **DOMPurify** to the latest version. By doing so, these attributes are no longer removed, which preserves the integrity of their content.

=== Screen readers now announce the selected color of forecolor and backcolor buttons.
// #TINY-9796

=== Resize handles would not appear on editable images in a non-editable context.
// #TINY-10118

=== The dialog size was not updated when the size argument was changed when redialling a dialog.
// #TINY-10209

=== Custom block element's where not considered block elements in some cases.
// #TINY-10139
Before, if a user copied and pasted a block element that was inside a custom element like the example config below, the editor would make an duplicate copy of the outer wrapper for the custom block element when pasting the content back. This happened because the function didn't check if the element is a wrapper element.

[source,js]
----
tinymce.init({
  selector: 'textarea',  // change this value according to your HTML
  extended_valid_elements: 'mycustomblock[id],mycustominline',
  custom_elements: 'mycustomblock,~mycustominline' // Notice the ~ prefix to force a span element for the element
});
----

{productname} 6.8, now also considers **custom elements** as part of its process when checking if the element is a wrapper element.

=== An empty element with a contenteditable="true" attribute within a table cell would not be treated as content and get removed if backspace or delete was being pressed.
// #TINY-10010

=== Creating a new li via enter inside a nested list would not inherit styles from the source li.
// #TINY-10316
Previously, when the user created a new `li` from a nested list within its parent by keypress **Enter** the editor would ignore the styles applied to the nested list.

As a consequence, the new `li` did not **inherit** the nested list styles.

{productname} 6.8 addresses this issue, now, when the user creates a new `li` item within a nested list, the styles are copied over from the “source” to the newly created `li` as expected.

=== Removing an LI element containing a details element would incorrectly merge its content.
// #TINY-10133
Previously, when a caret was positioned at the start of a list item containing only one block element, pressing the Backspace key caused the block content to unwrap.

This had the unintended consequence of detaching the child `details` element content and appending it to the content of the preceding list item. Unfortunately, this action left the `summary` element devoid of its requisite parent `details` element, rendering it structurally invalid.
{productname} 6.8 addresses this issue. now, the details content is no longer unwrapped and moved to the upper list item, which preserves the component's expected structure.

=== Merging an external p inside a list via delete or backspace would incorrectly try to move a parent element inside a child element.
// #TINY-10289
Previously, when the caret was positioned at either the,

. **beginning** of the `<p>` and the `backspace` key is pressed; or
. **end** of the `<li>` with **id child** and the `delete` key is pressed.

the `<p>` tag element would be moved inside the child element, rather than the context being merged with the `<li>` child element context.

.Example
[source, html]
----
<ol>
  <li>List 1</li>
  <li id="parent">
    <p>p1</p>
    <ol>
      <li id="child">List 1-1 </li>
    </ol>
    <p>Place cursor at the start of this line and hit backspace.</p>
  </li>
</ol>
----

As a consequence, a console error `"Uncaught DOMException: Failed to execute 'appendChild' on 'Node': The new child element contains the parent"`, would be displayed in the developer console.

{productname} 6.8 addresses this issue, now, after pressing the backspace or delete key, the parent element no longer attempts to merge into the child element, but rather unwraps the parent element and merges the context into the child element, resulting in:

.Example (result)
[source, html]
----
<ol>
  <li>List 1</li>
  <li id="parent">
    <p>p1</p>
    <ol>
      <li id="child">List 1-1 Place cursor at the start of this line and hit backspace.</li>
    </ol>
  </li>
</ol>
----

As a result, the developer console, no longer displays the console error and the merge between the two elements behaves as expected.


[[known-issues]]
== Known issues

This section describes issues that users of {productname} 6.8 may encounter and possible workarounds for these issues.

There <is one | are <number> known issue<s> in {productname} 6.8.

=== <TINY-vwxyz 1 changelog entry>
//#TINY-vwxyz1

// CCFR here.


[[security-fixes]]
== Security fixes

{productname} 6.8 includes <a fix | fixes for the following security issue<s>:

=== <TINY-vwxyz 1 changelog entry>
//#TINY-vwxyz1

// CCFR here.
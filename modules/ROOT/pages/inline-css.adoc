= Inline CSS plugin
:navtitle: Inline CSS
:description: takes {productname} documents and outputs HTML formatted according to email-friendly HTML best practices (eg inlined CSS).
:description_short: Inlines {productname} CSS for better presentation in email.
:keywords: plugin, inlinecss, email friendly, email, output, inline, css, post-process, html
:pluginname: Inline CSS
:plugincode: inlinecss
:plugincategory: premium

include::partial$misc/admon-premium-plugin.adoc[]

include::partial$misc/admon-requires-6.3v.adoc[]

As is normal and long-time best practice, {productname} documents keep CSS and HTML separate. This practice is not, however, email-friendly.

The {pluginname} plugin takes a {productname} document, and processes it such that the previously separate CSS is applied inline to each HTML element. This single output file is much closer to the common requirements for sending as an HTML-formatted email.

== Interactive example

liveDemo::inline-css[]

== Basic setup

To add the {pluginname} plugin to the editor, add `{plugincode}` to the `plugins` option in the editor configuration.

For example:

[source,js]
----
tinymce.init({
  selector: 'textarea',  // change this value according to your HTML
  plugins: 'inlinecss',
});
----

== Usage notes

The {pluginname} plugin does not support

. https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes[Pseudo-classes] (for example `button:hover { color: blue; }`).
. https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements[Pseudo-elements] (for example `p::first-line { color: blue; }`)
. https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule[@ rules] for example `@media (screen)`)
. The `!important` property.

The {pluginname} plugin does support

. @import with no @-rules.

// * some pseudo-class selectors. See the specification for more details
// (https://notion.so/tinycloud/Technical-specification-7c16d4522d1241ba9e7364880eab3e51#94b1d13ff444492bbfce789f7876f39c)
// 
// 2. Vogue only supports `@import` @-rules at this stage.
// 
// See the Jira ticket: https://ephocks.atlassian.net/browse/TINY-9265
// 
// see the tech spec for @-rule support:
// https://notion.so/tinycloud/Technical-specification-7c16d4522d1241ba9e7364880eab3e51#555fede3a4ff4a26ad5efdf72bc1af6f.

// This plugin allows extracting the content of the editor with CSS inlined.
// Support classic and inline modes. Can be used in shadow dom. 
// Should be able to extract CSS from the stylesheets defined via
// `content_css` and `font_css` options, and CSS styles defined via `style_css` option.


// There is only one API: `getContent()`.
// Regarding to the events, it dispatches `InlineCSS` event.
// I think it is OK to document this event even though its purpose isn’t really for the user’s usage.


== Options

The following configuration options affect the behavior of the {pluginname} plugin.

// include::partial$configuration/inline-css.adoc[]

// ‘The target group is developers, not end-users’: <https://ephocks.atlassian.net/browse/EPIC-31>
// Consequently, I’ve assumed the Inline CSS plugin will not be invoked by:
// * using a Toolbar button; nor by
// * selecting from a menu.
// @bforte review required.
=== inline_selector_filter

Determines whether it is valid for a given CSS selector to have its CSS properties inlined into the HTML content

Default: All selectors are considered valid to have their CSS inlined

Type: `String` `RegExp` or `Function`

[source,js]
----
inlinecss_selector_filter: (selector: string): boolean => {
	return selector.indexOf('myprefix') !== -1;
}
----

=== inline_file_filter

Determines whether it is valid for a given CSS stylesheet to have its CSS inspected and inlined into the HTML content

Default: All CSS stylesheet are considered valid to have their CSS inspected and inlined

Type: `String` `RegExp` or `Function`

[source,js]
----
inlinecss_file_filter: (href: string): boolean => {
	return selector.indexOf('mystyles') !== -1;
}
----

== Events

// Inline CSS-specific events.

The {pluginname} plugin provides the following events.

include::partial$events/{plugincode}-events.adoc[]

== APIs

The {pluginname} plugin provides the following APIs.

include::partial$plugin-apis/{plugincode}-apis.adoc[]

:rootDir: ../../
:partialsDir: {rootDir}partials/
:imagesDir: {rootDir}images/
= Comments 2.0
:description: Comments 2.0 provides the ability to add comments to the content and collaborate with other users for content editing.
:keywords: comments commenting tinycomments
:title_nav: Comments 2.0

[[introduction]]
== Introduction

The Comments 2.0 plugin provides the ability to start or join a conversation by adding comments to the content within the TinyMCE editor. The Comments 2.0 plugin is built upon the link:{baseurl}/advanced/annotations.html[Annotations API] and uses annotations to create comment threads (conversations).

Comments 2.0 is a premium plugin from Tiny. Please see the link:{baseurl}/enterprise/tiny-comments.html[Premium features] section for all the buying options.

Once you have obtained the Comments 2.0 plugin, refer to the following instructions for using it.

[[modes]]
=== Modes

There are two modes available in Comments 2.0 that provide the ability to save comments. These modes are configured in the Comments 2.0 settings.

* *Callback Mode* - This is the default mode in Comments 2.0. This mode is used to configure storage and save comments on the user's server. This option provides a choice to configure the storage settings to either persist comments immediately or save them at the same time as the content. Additional callbacks are required to be configured to use Comments in the callback mode. Refer to the link:{baseurl}/advanced/configuring-comments-callbacks.html[configuring callbacks for comments] section for more information.
* *Embedded Mode* - This mode allows the user to store the comments within the content. No additional callbacks are required to be configured to use this mode.

[[configuring-comments-20-embedded-mode]]
=== Configuring Comments 2.0 embedded mode
anchor:configuringcomments20embeddedmode[historical anchor]

To configure Comments 2.0 to use the embedded mode use the following script:

[source,js]
----
tinymce.init({
  selector: "#textarea",
  menubar: 'file edit view insert format tools tc',
  menu: {
   tc: {
    title: 'TinyComments',
    items: 'addcomment'
   }
 },
 tinycomments_author: 'Embedded Journalist',
 tinycomments_mode: 'embedded'
 ...
})
----

[[configuring-the-comments-20-addcomment-toolbar-button]]
=== Configuring the Comments 2.0 addcomment toolbar button
anchor:configuringthecomments20addcommenttoolbarbutton[historical anchor]

The `addcomment` toolbar button provides the ability to add comments.

Use the following script to configure the Comments 2.0 toolbar button:

[source,js]
----
tinymce.init({
 selector: "#textarea",
 toolbar: 'bold italic underline insertfile | addcomment',
 ...
})
----

*Result*: The *Comments*  image:comment-disabled.png[**Comments**] toolbar button appears in the toolbar menu. The function of this button is to add comments to the selected text.

[[configuring-the-comments-20-showcomments-toolbar-button]]
=== Configuring the Comments 2.0 showcomments toolbar button
anchor:configuringthecomments20showcommentstoolbarbutton[historical anchor]

The `showcomments` toolbar button provides the ability to display comments field for the selected text. It is a toggle button and is used to hide the comments sidebar as well.

Use the following script to configure the Comments 2.0 toolbar button:

[source,js]
----
tinymce.init({
 selector: "#textarea",
 toolbar: 'bold italic underline insertfile | showcomments',
 ...
})
----

*Result*: The *Comments*  image:comment-disabled.png[**Comments**] toolbar button appears in the toolbar menu. The function of this button is to show comments to for the selected text.

[[configuring-the-comments-20-menu-item]]
=== Configuring the Comments 2.0 menu item
anchor:configuringthecomments20menuitem[historical anchor]

By default, when Comments 2.0 is added to the plugin list, the default menus will have entries for `addcomment` (Insert Menu), `showcomments` (View Menu), and `deleteallconversations` (File Menu).

For more information on configuring menu items refer to the link:{baseurl}/configure/editor-appearance/#toolbar[toolbar] and link:{baseurl}/configure/editor-appearance/#menu[menu] sections.

Currently, there are three menu items available:

* `addcomment` - Provides the ability to add comments. By default, this option can be accessed through *Insert* \-> *Add comment* menu bar item.
* `showcomments`- Provides the ability to display comments field for the selected text. It is a toggle button and is used to hide the comments as well. By default, this option can be accessed through *View* \-> *Show comment* menu bar item.
* `deleteallconversations`- Provides the ability to delete all the comments in the content. By default, this option can be accessed through *File* \-> *Delete all conversations* menu bar item.

[[configuring-the-commented-text-properties]]
=== Configuring the commented text properties
anchor:configuringthecommentedtextproperties[historical anchor]

The editor needs to be configured to highlight the commented text. Replace the value of `background-color` in the following configuration example to change the highlight color of the text that the comment has been added to:

[source,js]
----
tinymce.init({
...
 content_style: '.tox-comments-visible span.tox-comment
 { background-color: magenta; }.tox-comments-visible span.tox-comment--active
 { background-color: cyan; }'
 ...
})
----

*Result*: The commented text will be highlighted yellow.
image:highlight.png[**Highlighted text**]

For more information on TinyMCE formats, refer to the link:{baseurl}/configure/content-formatting/#formats[formats] section.

[[using-comments]]
=== Using Comments
anchor:usingcomments[historical anchor]

[[to-add-a-comment]]
==== To add a comment
anchor:toaddacomment[historical anchor]

. Select the text from the desired location in the editor body.
. From the navigation menu, choose *Insert*\-> *Add Comment* or click on the *Comments* image:comment-disabled.png[**Comments**] toolbar button to add the comment.
. The Comment dialog box appears in the sidebar of the editor instance.
. Type the comment in the box displaying "_Say something..._" suggested text.
. Press *Clear* to delete or *Save* to store the input comment.

*Result*: The selected text will be highlighted as per the configured options. The following screen with the option for editing, deleting, and replying to the comment, will appear.
image:commentedit.png[**Delete Conversation**]

NOTE: The above procedure can be followed for adding multiple comments to the document.

[[editing-a-comment]]
==== Editing a comment
anchor:editingacomment[historical anchor]

Follow this procedure to edit a comment.

. Click on this image:3dots.png[**3dots**] icon above the comments box to expand the menu.
. Select *Edit* from the menu items.
. The comment field becomes editable. Make the required changes.
. Click *Cancel* to discard or *Save* to store the changes.

[[delete-a-comment]]
==== Delete a comment
anchor:deleteacomment[historical anchor]

Follow this procedure to delete a comment. This option is not available for the first comment in a conversation.

. Click on this image:3dots.png[**3dots**] icon above the comments box to expand the menu.
. Select *Delete* from the menu items.
. The following options appear in the comments sidebar:
image:delete.png[**delete comment**]
. Click *Cancel* to save or *Delete* to remove the comment from the conversation.

[[delete-conversation]]
==== Delete conversation
anchor:deleteconversation[historical anchor]

This option is only available for the first comment in a conversation. Once the comment is saved, follow this procedure to delete a conversation.

. Click on this image:3dots.png[**3dots**] icon above the comments box to expand the menu.
. Select *Delete conversation* from the menu items.
. The following decision dialog box will appear:
image:decision.png[**delete conversation**]
. Click *Cancel* to save or *Delete* to remove the conversation.

*Result*: The conversation and all its subsequent comments will be deleted.

[[show-comment]]
==== Show comment
anchor:showcomment[historical anchor]

Follow this procedure to display the comments sidebar:

. Place the cursor on the desired text in the editor body:
. From the navigation menu, choose *View* \-> *Show Comment* or click on the *Show Comments*image:comment-disabled.png[**Comments**] toggle toolbar button to display the comment.

*Result*: The comments sidebar will appear and display the corresponding conversation for the highlighted text.

[[delete-all-conversations]]
==== Delete all conversations
anchor:deleteallconversations[historical anchor]

Follow this procedure to delete all conversations in the document:

. From the navigation menu, choose *File* \-> *Delete all conversations* option to delete all the comments in a document.
. The following decision dialog box will appear:
image:decision2.png[**Delete all conversations**]
. Click *Ok* to remove the all the comments or *Cancel* to dismiss the action.

*Result*: All the comments for the selected document will be deleted.

Check out the link:{baseurl}/demo/comments/#comments20demo[Comments demo] to try out this new feature.

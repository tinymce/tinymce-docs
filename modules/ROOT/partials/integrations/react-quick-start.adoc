:packageName: tinymce-react

The https://github.com/tinymce/tinymce-react[Official {productname} React component] integrates {productname} into React projects. This procedure creates a https://github.com/facebook/create-react-app[basic React application] containing a {productname} editor.

For examples of the {productname} integration, visit https://tinymce.github.io/tinymce-react/[the tinymce-react storybook].

== Prerequisites

This procedure requires https://nodejs.org/[Node.js (and npm)].

== Procedure

. Use the https://github.com/facebook/create-react-app[Create React App] package to create a new React project named `+tinymce-react-demo+`.
+
[source,sh]
----
npx create-react-app tinymce-react-demo
----
. Change to the newly created directory.
+
[source,sh]
----
cd tinymce-react-demo
----

ifeval::["{productSource}" == "package-manager"]
. Install the `+tinymce+` and `+tinymce-react+` packages and save them to your `+package.json+` with `+--save+`.
+
[source,sh]
----
npm install --save tinymce @tinymce/tinymce-react
----
endif::[]
ifeval::["{productSource}" != "package-manager"]
. Install the `+tinymce-react+` package and save it to your `+package.json+` with `+--save+`.
+
[source,sh]
----
npm install --save @tinymce/tinymce-react
----
endif::[]

. Using a text editor, open `+./src/App.js+` and replace the contents with:
+
[source,jsx]
----
import React, { useRef } from 'react';
import { Editor } from '@tinymce/tinymce-react';

export default function App() {
  const editorRef = useRef(null);
  const log = () => {
    if (editorRef.current) {
      console.log(editorRef.current.getContent());
    }
  };
  return (
    <>
      <Editor
        onInit={(evt, editor) => editorRef.current = editor}
        initialValue="<p>This is the initial content of the editor.</p>"
        init={{
          height: 500,
          menubar: false,
          plugins: [
            'advlist autolink lists link image charmap print preview anchor',
            'searchreplace visualblocks code fullscreen',
            'insertdatetime media table paste code help wordcount'
          ],
          toolbar: 'undo redo | formatselect | ' +
          'bold italic backcolor | alignleft aligncenter ' +
          'alignright alignjustify | bullist numlist outdent indent | ' +
          'removeformat | help',
          content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'
        }}
      />
      <button onClick={log}>Log editor content</button>
    </>
  );
}
----
+
This JavaScript file will create a component "`+App+`" containing a {productname} editor configured with basic features.
ifeval::["{productSource}" == "cloud"]
. Include the `+apiKey+` option in the editor element and include your link:{accountsignup}/[{cloudname} API key]. Such as:
+
[source,jsx]
----
<Editor apiKey='your-api-key' init={{ /* your other settings */ }} />
----

endif::[]
ifeval::["{productSource}" == "package-manager"]
. Bundle {productname} with the React application using a module loader (such as Webpack).
+
--
:depth: 1
include::partial$integrations/bundling-integration.adoc[]
--

endif::[]
ifeval::["{productSource}" == "zip"]
. {productname} can be self-hosted by either: xref:deployingtinymceindependent[Deploying {productname} independent of the React application], or xref:bundle[Bundling {productname} with the React application].

* [[deployingtinymceindependent]] Deploying {productname} independent of the React application. To use a {productname} instance that has been deployed independent of the React application, use: xref:usingthetinyscriptsrcprop[the `+tinymceScriptSrc+` prop], or xref:usinganhtmlscripttag[an HTML `+<script>+` tag].
+
--
* [[usingthetinyscriptsrcprop]] Using the `+tinymceScriptSrc+` prop:
** To use an independent deployment of {productname}, add the `tinymceScriptSrc` prop to specify the path to the {productname} script, such as:
+
[source,jsx]
----
<Editor tinymceScriptSrc="/path/to/tinymce.min.js" />
----
** To use `tinymceScriptSrc` with the `create-react-app` project, put the {productname} distribution in `./public` folder and reference the path to the `public` folder using the environment variable `process.env.PUBLIC_URL`, such as:
+
[source,jsx]
----
<Editor tinymceScriptSrc={process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'}>
----
* [[usinganhtmlscripttag]] Using an HTML `<script>` tag:
** Add a script to either the `<head>` or the end of the `<body>` of the HTML file, such as:
+
[source,html]
----
<script src="/path/to/tinymce.min.js"></script>
----
** To use the independently sourced {productname} with create-react-app, add the script tag to `./public/index.html`.
Normally the `tinymce` distribution would be put in the `public` folder and referenced using the URL `%PUBLIC_URL%/tinymce/tinymce.min.js`, such as:
+
[source,html]
----
<script src="%PUBLIC_URL%/tinymce/tinymce.min.js"></script>
----
--

* [[bundle]] Bundle {productname} with the React application using a module loader (such as Webpack).
+
--
:depth: 2
include::partial$integrations/bundling-integration.adoc[]
--
endif::[]

. Test the application using the Node.js development server.
+
* To start the development server, navigate to the `+tinymce-react-demo+` directory and run:
+
[source,sh]
----
npm run start
----

* To stop the development server, select on the command line or command prompt and press _Ctrl+C_.

== Deploying the application to a HTTP server

The application will require further configuration before it can be deployed to a production environment. For information on configuring the application for deployment, see: https://create-react-app.dev/docs/deployment[Create React App - Deployment].

To deploy the application to a local HTTP Server:

. Navigate to the `+tinymce-react-demo+` directory and run:
+
[source,sh]
----
npm run build
----
. Copy the contents of the `+tinymce-react-demo/build+` directory to the root directory of the web server.

The application has now been deployed on the web server.

NOTE: Additional configuration is required to deploy the application outside the web server root directory, such as http://localhost:<port>/my_react_application.

== Next Steps

* For examples of the {productname} integration, see: https://tinymce.github.io/tinymce-react/[the tinymce-react storybook].
* For information on customizing:
** {productname} integration, see: xref:react-ref.adoc[React framework Technical Reference].
** {productname}, see: xref:basic-setup.adoc[Basic setup].
** The React application, see: https://create-react-app.dev/docs/getting-started[Create React App] or https://reactjs.org/docs/getting-started.html[the React documentation].
